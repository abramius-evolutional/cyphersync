
Процесс добавления файла
------------------------

Существует два варианта. Либо мы хотим залить новый файл и добавить его в список групп (a),
либо мы хотим добавить какой либо уже залитый файл в другие группы (b).

a) 
    1. Отправляем запрос на /content/add_file/ GET для получения криптоинформации,
    для обеспечения криптодоступа людям тех групп, в которые нужно добавить файл
    На вход нужно подать
        accessToken - авторизационный токен
(!)     size_bytes - размер файла в байтах
        group_ids - список целевых групп json строкой ("[1, 2, 3]" или "[67]")
    На выход прилетит 
        {
            "keys": [
                {
                    "pub_key": "304802 ... 3010001", 
                    "email": "userA@xxx.com", 
                    "device_name": "iphoneA",
                    "device_id": id устройства
                },
                ...
            ]
        }
        В этом ответе "keys" содержит список всех устройств всех пользователей всех групп
        куда добавляются файлы. Всем этим устройствам нужно разрешить оступ к файлу.
(!) В случае, если данный пользователь превысил свой лимит загрузок - вернется ошибка 403 со статусом "memory volume is over"

    2. На данный момент имеются сырые данные (raw_data). Нужно их зашифровать. Это проиходит так:
        2.1 Необходимо сгенерировать ключ определенной длины (случайный набор символов) - получим file_key.
        2.2 Зашифровать данные файла (raw_data) алгоритмом AES этим ключом - получим cypher_data.
        2.3 Далее нужно для каждого устройства из прилетевшых после GET запроса
            зашифровать алгоритмом RSA file_key каждоым pub_key'ем. В результате должен получиться словарь
            cyphers = {
                <device_id>: <RSA(file_key, pub_key)>,
                ...
            }

    3. Залить зашифрованные данные (cypher_data) на амазон
        3.1 Берем хеш от шифрованных данных алгоритмом SHA256.
            hash_data = SHA256(cypher_data)
        3.2 Получаем с сервера актуальные aws_bucket и aws_dir в которые нужно заливать данные
            /content/actual_aws_info/ GET передавая ей hash_data
        3.3 Формируем имя файла
            aws_key = <aws_dir>/<hash_data>
        3.4 Заливаем данные на амазон сервер в aws_bucket по ключу aws_key.
            Далее делаем эти данные публичными (что бы доступ мог иметь кто угодно).
            Стандартными средствами генерируем ссылку на данные (url).
            На выходе из этого пункта должен быть поределен следующий словарь
            aws_data = {
                "url": <публичная ссылка на амазон>,
                "bucket": aws_bucket,
                "key": aws_key,
                "hash_data": hash_data,
(!)             "size_bytes": <размер файла в байтах>
            }
    4. Делаем запрос /content/add_file/ POST
    С отправкой все криптоинформации и информации о залитом файле на амазон
    На вход пойдут.
        accessToken
        group_ids
        metadata - произвольная строка с метаданными
        cyphers
        aws_data